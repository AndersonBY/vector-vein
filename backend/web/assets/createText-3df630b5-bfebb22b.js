import{l as g,a9 as E,ar as L}from"./MermaidRenderer-11d852a3.js";import{f as b}from"./index-d0e2ad8e.js";function k(l){const e=l.replace(/\n{2,}/g,`
`);return L(e)}function v(l){const e=k(l),{children:n}=b(e),r=[[]];let o=0;function a(t,c="normal"){t.type==="text"?t.value.split(`
`).forEach((s,i)=>{i!==0&&(o++,r.push([])),s.split(" ").forEach(u=>{u&&r[o].push({content:u,type:c})})}):(t.type==="strong"||t.type==="emphasis")&&t.children.forEach(f=>{a(f,t.type)})}return n.forEach(t=>{t.type==="paragraph"&&t.children.forEach(c=>{a(c)})}),r}function $(l){const{children:e}=b(l);function n(r){return r.type==="text"?r.value.replace(/\n/g,"<br/>"):r.type==="strong"?`<strong>${r.children.map(n).join("")}</strong>`:r.type==="emphasis"?`<em>${r.children.map(n).join("")}</em>`:r.type==="paragraph"?`<p>${r.children.map(n).join("")}</p>`:`Unsupported markdown: ${r.type}`}return e.map(n).join("")}function j(l,e){e&&l.attr("style",e)}function C(l,e,n,r,o=!1){const a=l.append("foreignObject"),t=a.append("xhtml:div"),c=e.label,f=e.isNode?"nodeLabel":"edgeLabel";t.html(`
    <span class="${f} ${r}" `+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+c+"</span>"),j(t,e.labelStyle),t.style("display","table-cell"),t.style("white-space","nowrap"),t.style("max-width",n+"px"),t.attr("xmlns","http://www.w3.org/1999/xhtml"),o&&t.attr("class","labelBkg");let s=t.node().getBoundingClientRect();return s.width===n&&(t.style("display","table"),t.style("white-space","break-spaces"),t.style("width",n+"px"),s=t.node().getBoundingClientRect()),a.style("width",s.width),a.style("height",s.height),a.node()}function w(l,e,n){return l.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function y(l,e,n){const r=l.append("text"),o=w(r,1,e);S(o,[{content:n,type:"normal"}]);const a=o.node().getComputedTextLength();return r.remove(),a}function M(l,e,n,r=!1){const a=e.append("g");let t=a.insert("rect").attr("class","background");const c=a.append("text").attr("y","-10.1");let f=0;if(n.forEach(s=>{let i=s.map(p=>p.content).join(" "),u="",h=[],d=0;if(y(a,1.1,i)<=l)h.push(i);else{for(let p=0;p<=i.length;p++)if(u=i.slice(d,p),g.info(u,d,p),y(a,1.1,u)>l){const x=i.slice(d,p).lastIndexOf(" ");x>-1&&(p=d+x+1),h.push(i.slice(d,p).trim()),d=p,u=null}u!=null&&h.push(u)}const T=h.map(p=>({content:p,type:s.type}));for(const p of T){let m=w(c,f,1.1);S(m,[p]),f++}}),r){const s=c.node().getBBox(),i=2;return t.attr("x",-i).attr("y",-i).attr("width",s.width+2*i).attr("height",s.height+2*i),a.node()}else return c.node()}function S(l,e){l.text(""),e.forEach((n,r)=>{const o=l.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?o.text(n.content):o.text(" "+n.content)})}const B=(l,e="",{style:n="",isTitle:r=!1,classes:o="",useHtmlLabels:a=!0,isNode:t=!0,width:c,addSvgBackground:f=!1}={})=>{if(g.info("createText",e,n,r,o,a,t,f),a){const s=$(e),i={isNode:t,label:E(s).replace(/fa[blrs]?:fa-[\w-]+/g,h=>`<i class='${h.replace(":"," ")}'></i>`),labelStyle:n.replace("fill:","color:")};return C(l,i,c,o,f)}else{const s=v(e);return M(c,l,s,f)}};export{B as c};
